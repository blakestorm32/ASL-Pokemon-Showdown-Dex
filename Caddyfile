# Railway/FrankenPHP site
http://:{$PORT} {
	# Serve from repo root (change to `public` if that's your web root)
	root * .

	# Enable compression
	encode gzip zstd

	# Use FrankenPHP as the PHP handler
	php_server

	# Deny PUT and DELETE like the Apache <Limit> block did
	@deny method PUT DELETE
	respond @deny 403

	# Block .git directory
	@git path /.git/*
	respond @git 403

	# Redirect /pokedex... → /  (302)
	@pokedex path_regexp pokedex ^/pokedex(/.*)?$
	redir @pokedex / 302

	# Rewrite these app routes to index.php (query string preserved)
	@app path_regexp app ^/(pokemon|items|abilities|tags|egggroups|moves|types|tiers|categories)(/.*)?$
	rewrite @app /index.php

	# /articles/<slug> → index.php
	@articles path_regexp articles ^/articles/[a-z0-9]+/?$
	rewrite @articles /index.php

	# Serve static files (default 404 for missing assets)
	file_server
}
